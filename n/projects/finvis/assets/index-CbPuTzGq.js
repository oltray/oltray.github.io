var e=Object.defineProperty,t=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s);import{r as n,a as s,g as a,R as r,N as o,O as l,H as i,b as c,d}from"./react-vendor-BpfFb6RJ.js";import{c as x,R as m,A as u,C as h,X as p,Y as g,T as f,L as y,a as b,P as v,b as j,d as N,B as w,e as k,f as S,g as C,h as M,i as A,j as z,k as D,l as $,m as F}from"./chart-vendor-jlShF_xA.js";import{X as I}from"./db-vendor-DCtitoAh.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E={exports:{}},P={},R=n,O=Symbol.for("react.element"),B=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,L=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function W(e,t,n){var s,a={},r=null,o=null;for(s in void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(o=t.ref),t)q.call(t,s)&&!V.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:O,type:e,key:r,ref:o,props:a,_owner:L.current}}P.Fragment=B,P.jsx=W,P.jsxs=W,E.exports=P;var T=E.exports,H={},K=s;H.createRoot=K.createRoot,H.hydrateRoot=K.hydrateRoot;
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const s=n.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:i,...c},d)=>{return n.createElement("svg",{ref:d,...U,width:a,height:a,stroke:s,strokeWidth:o?24*Number(r)/Number(a):r,className:["lucide",`lucide-${x=e,x.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,l].join(" "),...c},[...t.map(([e,t])=>n.createElement(e,t)),...Array.isArray(i)?i:[i]]);var x});return s.displayName=`${e}`,s},_=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),G=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Z=Y("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),X=Y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),J=Y("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Q=Y("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),ee=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),te=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ne=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),se=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ae=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),re=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),oe=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),le=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ie=Y("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ce=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),de=Y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),xe=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),me=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ue=Y("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),he=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),pe=Y("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),ge=Y("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),fe=Y("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ye=Y("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),be=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ve=Y("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),je=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Ne=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),we=Y("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),ke=Y("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Se=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ce=Y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Me=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ae=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ze=Y("XOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),De=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$e=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Fe={},Ie=e=>{let t;const n=new Set,s=(e,s)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,r={setState:s,getState:a,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{"production"!==(Fe?"production":void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=t=e(s,a,r);return r};var Ee={exports:{}},Pe={},Re={exports:{}},Oe={},Be=n;var qe="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Le=Be.useState,Ve=Be.useEffect,We=Be.useLayoutEffect,Te=Be.useDebugValue;function He(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qe(e,n)}catch(s){return!0}}var Ke="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=Le({inst:{value:n,getSnapshot:t}}),a=s[0].inst,r=s[1];return We(function(){a.value=n,a.getSnapshot=t,He(a)&&r({inst:a})},[e,n,t]),Ve(function(){return He(a)&&r({inst:a}),e(function(){He(a)&&r({inst:a})})},[e]),Te(n),n};Oe.useSyncExternalStore=void 0!==Be.useSyncExternalStore?Be.useSyncExternalStore:Ke,Re.exports=Oe;var Ue=Re.exports,Ye=n,_e=Ue;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ze=_e.useSyncExternalStore,Xe=Ye.useRef,Je=Ye.useEffect,Qe=Ye.useMemo,et=Ye.useDebugValue;Pe.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var r=Xe(null);if(null===r.current){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=Qe(function(){function e(e){if(!i){if(i=!0,r=e,e=s(e),void 0!==a&&o.hasValue){var t=o.value;if(a(t,e))return l=t}return l=e}if(t=l,Ge(r,e))return t;var n=s(e);return void 0!==a&&a(t,n)?(r=e,t):(r=e,l=n)}var r,l,i=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,s,a]);var l=Ze(e,r[0],r[1]);return Je(function(){o.hasValue=!0,o.value=l},[l]),et(l),l},Ee.exports=Pe;const tt=a(Ee.exports),nt={},{useDebugValue:st}=r,{useSyncExternalStoreWithSelector:at}=tt;let rt=!1;const ot=e=>e;const lt=e=>{"production"!==(nt?"production":void 0)&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?Ie(e):Ie)(e):e,n=(e,n)=>function(e,t=ot,n){"production"!==(nt?"production":void 0)&&n&&!rt&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),rt=!0);const s=at(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return st(s),s}(t,e,n);return Object.assign(n,t),n},it=e=>e?lt(e):lt,ct=it(e=>({theme:localStorage.getItem("finvis-theme")||"y2k",sidebarOpen:!1,setTheme:t=>{localStorage.setItem("finvis-theme",t),document.documentElement.setAttribute("data-theme",t),e({theme:t})},toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:t=>e({sidebarOpen:t})})),dt=[{to:"/",icon:ue,label:"Dashboard"},{to:"/bills",icon:ve,label:"Bills"},{to:"/income",icon:ie,label:"Income"},{to:"/forecast",icon:Me,label:"Forecast"},{to:"/settings",icon:Ne,label:"Settings"}];function xt(){const{sidebarOpen:e,setSidebarOpen:t}=ct();return T.jsxs(T.Fragment,{children:[e&&T.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>t(!1)}),T.jsxs("aside",{className:x("fixed top-0 left-0 z-50 h-full w-60 bg-[var(--color-bg-secondary)] border-r border-[var(--color-border)]","flex flex-col","transform transition-transform duration-200 lg:translate-x-0 lg:static lg:z-auto",e?"translate-x-0":"-translate-x-full"),children:[T.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-5 border-b border-[var(--color-border)]",children:[T.jsx("h1",{className:"text-xl font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent",children:"FinVis"}),T.jsx("button",{className:"lg:hidden p-1 hover:bg-white/10 rounded",onClick:()=>t(!1),"aria-label":"Close menu",children:T.jsx(De,{size:20})})]}),T.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:dt.map(({to:e,icon:n,label:s})=>T.jsxs(o,{to:e,onClick:()=>t(!1),className:({isActive:e})=>x("flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors",e?"bg-neon-pink/10 text-neon-pink":"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] hover:bg-white/5"),children:[T.jsx(n,{size:18}),s]},e))}),T.jsx("div",{className:"flex-shrink-0 p-4 border-t border-[var(--color-border)]",children:T.jsx("p",{className:"text-xs text-[var(--color-text-muted)] text-center",children:"100% Private · Your Data Stays Local"})})]}),T.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-30 bg-[var(--color-bg-secondary)] border-t border-[var(--color-border)] lg:hidden",children:T.jsx("div",{className:"flex items-center justify-around py-2",children:dt.slice(0,4).map(({to:e,icon:t,label:n})=>T.jsxs(o,{to:e,className:({isActive:e})=>x("flex flex-col items-center gap-0.5 px-3 py-1 text-xs transition-colors",e?"text-neon-pink":"text-[var(--color-text-muted)]"),children:[T.jsx(t,{size:20}),T.jsx("span",{children:n})]},e))})})]})}function mt(){const e=ct(e=>e.toggleSidebar);return T.jsx("header",{className:"sticky top-0 z-20 bg-[var(--color-bg-primary)]/80 backdrop-blur-md border-b border-[var(--color-border)] lg:hidden",children:T.jsxs("div",{className:"flex items-center gap-4 px-4 py-3",children:[T.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors","aria-label":"Toggle menu",children:T.jsx(he,{size:22})}),T.jsx("h1",{className:"text-lg font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent",children:"FinVis"})]})})}function ut(){return T.jsxs("div",{className:"flex min-h-screen",children:[T.jsx(xt,{}),T.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[T.jsx(mt,{}),T.jsx("main",{className:"flex-1 p-4 lg:p-8 pb-20 lg:pb-8",children:T.jsx(l,{})})]})]})}const ht={weekly:"Weekly",biweekly:"Biweekly",monthly:"Monthly",quarterly:"Quarterly",yearly:"Yearly"},pt={housing:"Housing",utilities:"Utilities",transportation:"Transportation",insurance:"Insurance",debt:"Debt",subscriptions:"Subscriptions",lifestyle:"Lifestyle",savings:"Savings",other:"Other"},gt={housing:"#ff0080",utilities:"#00fff9",transportation:"#b026ff",insurance:"#ffff00",debt:"#ff6b35",subscriptions:"#39ff14",lifestyle:"#ff69b4",savings:"#00bfff",other:"#888888"},ft={ongoing:"Ongoing",contract:"Contract",installment:"Installment","one-time":"One-Time"};const yt=new class extends I{constructor(){super("finvis"),t(this,"bills"),t(this,"incomes"),this.version(1).stores({bills:"id, name, category, dueDay, frequency, type",incomes:"id, name, payPeriod"})}},bt={getAll:async()=>yt.bills.toArray(),getById:async e=>yt.bills.get(e),async save(e){await yt.bills.put({...e,updatedAt:(new Date).toISOString()})},async delete(e){await yt.bills.delete(e)},async deleteAll(){await yt.bills.clear()},count:async()=>yt.bills.count()},vt=it((e,t)=>({bills:[],loading:!1,error:null,loadBills:async()=>{e({loading:!0,error:null});try{const t=await bt.getAll();e({bills:t,loading:!1})}catch(t){e({error:"Failed to load bills",loading:!1})}},addBill:async n=>{try{const s=function(e){const t=(new Date).toISOString();return{id:crypto.randomUUID(),frequency:"monthly",category:"other",dueDay:1,type:"ongoing",isPaid:!1,createdAt:t,updatedAt:t,...e}}(n);await bt.save(s),e({bills:[...t().bills,s]})}catch(s){e({error:"Failed to add bill"})}},updateBill:async n=>{try{const s={...n,updatedAt:(new Date).toISOString()};await bt.save(s),e({bills:t().bills.map(e=>e.id===n.id?s:e)})}catch(s){e({error:"Failed to update bill"})}},deleteBill:async n=>{try{await bt.delete(n),e({bills:t().bills.filter(e=>e.id!==n)})}catch(s){e({error:"Failed to delete bill"})}},togglePaid:async n=>{const s=t().bills.find(e=>e.id===n);if(!s)return;const a={...s,isPaid:!s.isPaid,updatedAt:(new Date).toISOString()};await bt.save(a),e({bills:t().bills.map(e=>e.id===n?a:e)})}})),jt={weekly:"Weekly",biweekly:"Biweekly","semi-monthly":"Semi-Monthly",monthly:"Monthly",annually:"Annually"};const Nt={getAll:async()=>yt.incomes.toArray(),getById:async e=>yt.incomes.get(e),async save(e){await yt.incomes.put({...e,updatedAt:(new Date).toISOString()})},async delete(e){await yt.incomes.delete(e)},async deleteAll(){await yt.incomes.clear()}},wt=it((e,t)=>({incomes:[],loading:!1,error:null,loadIncomes:async()=>{e({loading:!0,error:null});try{const t=await Nt.getAll();e({incomes:t,loading:!1})}catch(t){e({error:"Failed to load income data",loading:!1})}},addIncome:async n=>{try{const s=function(e){const t=(new Date).toISOString();return{id:crypto.randomUUID(),payPeriod:"monthly",createdAt:t,updatedAt:t,...e}}(n);await Nt.save(s),e({incomes:[...t().incomes,s]})}catch(s){e({error:"Failed to add income"})}},updateIncome:async n=>{try{const s={...n,updatedAt:(new Date).toISOString()};await Nt.save(s),e({incomes:t().incomes.map(e=>e.id===n.id?s:e)})}catch(s){e({error:"Failed to update income"})}},deleteIncome:async n=>{try{await Nt.delete(n),e({incomes:t().incomes.filter(e=>e.id!==n)})}catch(s){e({error:"Failed to delete income"})}}})),kt={weekly:52/12,biweekly:26/12,monthly:1,quarterly:1/3,yearly:1/12},St={weekly:52/12,biweekly:26/12,"semi-monthly":2,monthly:1,annually:1/12};function Ct(e,t){return e*kt[t]}function Mt(e){return e.amount*St[e.payPeriod]}function At(e){return e.reduce((e,t)=>e+Ct(t.amount,t.frequency),0)}function zt(e){return e.reduce((e,t)=>e+Mt(t),0)}function Dt(e){const t=new Map;for(const s of e){const e=Ct(s.amount,s.frequency),n=t.get(s.category)||{total:0,count:0};t.set(s.category,{total:n.total+e,count:n.count+1})}const n=Array.from(t.values()).reduce((e,t)=>e+t.total,0);return Array.from(t.entries()).map(([e,{total:t,count:s}])=>({category:e,total:t,percentage:n>0?t/n*100:0,count:s})).sort((e,t)=>t.total-e.total)}function $t(e,t,n,s){const a=zt(t),r=[];let o=0;for(let l=0;l<s;l++){const t=new Date(n.getFullYear(),n.getMonth()+l,1),s=t.getMonth(),i=t.getFullYear(),c=t.toLocaleDateString("en-US",{month:"short",year:"numeric"}),d=e.filter(e=>{if("one-time"===e.type){if(!e.contractEndDate)return!1;const t=new Date(e.contractEndDate);return t.getMonth()===s&&t.getFullYear()===i}return"contract"===e.type&&e.contractEndDate?new Date(e.contractEndDate)>=t:"installment"!==e.type||void 0===e.paymentsRemaining||e.paymentsRemaining>l}).map(e=>({name:e.name,amount:Ct(e.amount,e.frequency),category:e.category})),x=d.reduce((e,t)=>e+t.amount,0),m=a-x;o+=m,r.push({month:s,year:i,label:c,totalIncome:a,totalExpenses:x,netCashFlow:m,runningBalance:o,bills:d})}return r}function Ft(e){return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}function It(e){if(e.length<2)return 0;const t=Ft(e),n=e.map(e=>(e-t)**2);return Math.sqrt(Ft(n))}function Et(e,t){const n=It(t);return 0===n?0:(e-Ft(t))/n}function Pt(e,t,n){return Math.min(Math.max(e,t),n)}function Rt(e,t){const n=zt(t),s=At(e),a=Pt(2.5*(n>0?(n-s)/n*100:0),0,100),r=Pt(35*t.length,0,100),o=["housing","insurance","debt"],l=Pt(100*(1-e.filter(e=>o.includes(e.category)).reduce((e,t)=>e+t.amount,0)/(e.reduce((e,t)=>e+t.amount,0)||1)),0,100),i=Pt(16.7*(n-s>0?6:n>0?n/s*6:0),0,100),c=Pt(100*(1-(e.length>0?Math.max(...e.map(e=>e.amount/(n||1))):0)),0,100),d=Math.round(.3*a+.15*r+.15*l+.25*i+.15*c);let x,m;return x=d>=85?"A":d>=70?"B":d>=55?"C":d>=40?"D":"F",m=d>=75?"low":d>=55?"moderate":d>=35?"high":"critical",{overall:d,breakdown:{savingsRate:Math.round(a),incomeStability:Math.round(r),expenseFlexibility:Math.round(l),emergencyRunway:Math.round(i),billConcentration:Math.round(c)},grade:x,riskLevel:m}}const Ot=["housing","insurance","debt"],Bt=["lifestyle","subscriptions","other","transportation"];function qt(e,t,n=6){const s=$t(e,t,new Date,n),a=new Map;for(const h of s)for(const e of h.bills){const t=e.category;a.has(t)||a.set(t,[]);const n=a.get(t);for(;n.length<s.indexOf(h);)n.push(0);n[s.indexOf(h)]=(n[s.indexOf(h)]||0)+e.amount}const r=Array.from(a.entries()).map(([e,t])=>{const n=function(e){if(e.length<2)return 0;const t=e.length,n=(t-1)/2,s=Ft(e);let a=0,r=0;for(let o=0;o<t;o++)a+=(o-n)*(e[o]-s),r+=(o-n)**2;return 0===r?0:a/r}(t);let s="stable";return n>5?s="rising":n<-5&&(s="falling"),{category:e,monthlyAmounts:t,trend:s,slopePerMonth:n,volatility:It(t)}}),o=s.map((e,t)=>{const n=t>0?s[t-1].totalExpenses:e.totalExpenses,a=(r=n,o=e.totalExpenses,0===r?o>0?100:0:(o-r)/Math.abs(r)*100);var r,o;const l=Ft(s.slice(0,t+1).map(e=>e.totalExpenses));return{label:e.label,totalExpenses:e.totalExpenses,changePercent:0===t?0:a,movingAvg:l}}),l=e.filter(e=>Ot.includes(e.category)).reduce((e,t)=>e+Ct(t.amount,t.frequency),0),i=e.filter(e=>Bt.includes(e.category)).reduce((e,t)=>e+Ct(t.amount,t.frequency),0),c=l+i||1,d=[0,0,0,0];for(const h of e){d[Math.min(Math.floor((h.dueDay-1)/7),3)]+=Ct(h.amount,h.frequency)}const x=d.indexOf(Math.max(...d)),m=r.filter(e=>"rising"===e.trend).sort((e,t)=>t.slopePerMonth-e.slopePerMonth),u=r.filter(e=>"falling"===e.trend).sort((e,t)=>e.slopePerMonth-t.slopePerMonth);return{categoryTrends:r,spendingVelocity:o,fixedVsVariableRatio:{fixed:l,variable:i,ratio:l/c},heaviestWeek:{weekLabel:["Days 1-7","Days 8-14","Days 15-21","Days 22-31"][x],amount:d[x]},topGrowingCategory:m[0]||null,topShrinkingCategory:u[0]||null}}function Lt(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function Vt({children:e,hover:t=!1,className:n,...s}){return T.jsx("div",{className:x("rounded-xl border border-[var(--color-border)] bg-[var(--color-bg-secondary)] p-6",t&&"transition-all hover:border-neon-pink/30 hover:shadow-glow-pink",n),...s,children:e})}function Wt(e,t){return new Date(t,e).toLocaleDateString("en-US",{month:"short",year:"numeric"})}const Tt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Ht(e,t){if(0===e)return"bg-white/5";const n=e/t;return n<.25?"bg-neon-pink/20":n<.5?"bg-neon-pink/40":n<.75?"bg-neon-pink/60":"bg-neon-pink/80"}function Kt({bills:e}){const t=new Date,[s,a]=n.useState(t.getMonth()),[r,o]=n.useState(t.getFullYear()),l=n.useMemo(()=>function(e,t,n){const s=new Date(t,n+1,0).getDate(),a=[];for(let r=1;r<=s;r++){const t=e.filter(e=>e.dueDay===r),n=t.reduce((e,t)=>e+Ct(t.amount,t.frequency),0);a.push({day:r,amount:n,bills:t.map(e=>e.name)})}return a}(e,r,s),[e,r,s]),i=n.useMemo(()=>Math.max(...l.map(e=>e.amount),1),[l]),c=function(e,t){return new Date(t,e+1,0).getDate()}(s,r),d=function(e,t){return new Date(t,e,1).getDay()}(s,r);return T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsx("h3",{className:"text-lg font-bold font-display",children:"Payment Calendar"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>{0===s?(a(11),o(r-1)):a(s-1)},className:"p-1 hover:bg-white/10 rounded transition-colors","aria-label":"Previous month",children:T.jsx(se,{size:18})}),T.jsx("span",{className:"text-sm font-mono min-w-[120px] text-center",children:Wt(s,r)}),T.jsx("button",{onClick:()=>{11===s?(a(0),o(r+1)):a(s+1)},className:"p-1 hover:bg-white/10 rounded transition-colors","aria-label":"Next month",children:T.jsx(ae,{size:18})})]})]}),T.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:Tt.map(e=>T.jsx("div",{className:"text-xs text-center text-[var(--color-text-muted)] py-1",children:e},e))}),T.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:d}).map((e,t)=>T.jsx("div",{className:"aspect-square"},`empty-${t}`)),Array.from({length:c}).map((e,t)=>{const n=t+1,s=l.find(e=>e.day===n),a=(null==s?void 0:s.amount)||0,r=(null==s?void 0:s.bills)||[];return T.jsxs("div",{className:`aspect-square rounded-md flex flex-col items-center justify-center relative group cursor-default ${Ht(a,i)}`,children:[T.jsx("span",{className:"text-xs font-mono",children:n}),a>0&&T.jsx("span",{className:"text-[10px] font-mono text-neon-pink",children:Lt(a)}),a>0&&T.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block z-10",children:T.jsxs("div",{className:"bg-[var(--color-bg-primary)] border border-[var(--color-border)] rounded-lg p-2 shadow-lg min-w-[140px]",children:[T.jsx("p",{className:"text-xs font-mono text-neon-cyan mb-1",children:Lt(a)}),r.map(e=>T.jsx("p",{className:"text-xs text-[var(--color-text-secondary)]",children:e},e))]})})]},n)})]}),T.jsxs("div",{className:"flex items-center justify-end gap-2 mt-4",children:[T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Less"}),T.jsx("div",{className:"flex gap-1",children:["bg-white/5","bg-neon-pink/20","bg-neon-pink/40","bg-neon-pink/60","bg-neon-pink/80"].map(e=>T.jsx("div",{className:`w-3 h-3 rounded-sm ${e}`},e))}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"More"})]})]})}function Ut({bills:e,incomes:t,months:s=6}){const a=n.useMemo(()=>$t(e,t,new Date,s),[e,t,s]).map(e=>({name:e.label,income:Math.round(100*e.totalIncome)/100,expenses:Math.round(100*e.totalExpenses)/100,balance:Math.round(100*e.runningBalance)/100}));return T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Cash Flow Forecast"}),T.jsx("div",{className:"h-72",children:T.jsx(m,{width:"100%",height:"100%",children:T.jsxs(u,{data:a,margin:{top:5,right:10,left:0,bottom:0},children:[T.jsxs("defs",{children:[T.jsxs("linearGradient",{id:"incomeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[T.jsx("stop",{offset:"5%",stopColor:"#39ff14",stopOpacity:.3}),T.jsx("stop",{offset:"95%",stopColor:"#39ff14",stopOpacity:0})]}),T.jsxs("linearGradient",{id:"expenseGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[T.jsx("stop",{offset:"5%",stopColor:"#ff0080",stopOpacity:.3}),T.jsx("stop",{offset:"95%",stopColor:"#ff0080",stopOpacity:0})]})]}),T.jsx(h,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),T.jsx(p,{dataKey:"name",stroke:"var(--color-text-muted)",fontSize:12,fontFamily:"Space Mono"}),T.jsx(g,{stroke:"var(--color-text-muted)",fontSize:12,fontFamily:"Space Mono",tickFormatter:e=>`$${(e/1e3).toFixed(1)}k`}),T.jsx(f,{contentStyle:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"8px",fontFamily:"Space Mono",fontSize:"12px"},formatter:e=>Lt(e)}),T.jsx(y,{wrapperStyle:{fontFamily:"Space Mono",fontSize:"12px"}}),T.jsx(b,{type:"monotone",dataKey:"income",stroke:"#39ff14",fill:"url(#incomeGradient)",strokeWidth:2,name:"Income"}),T.jsx(b,{type:"monotone",dataKey:"expenses",stroke:"#ff0080",fill:"url(#expenseGradient)",strokeWidth:2,name:"Expenses"})]})})})]})}function Yt({bills:e}){const t=n.useMemo(()=>Dt(e),[e]),s=t.map(e=>({name:pt[e.category],value:Math.round(100*e.total)/100,color:gt[e.category],percentage:e.percentage}));return T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Spending by Category"}),0===t.length?T.jsx("p",{className:"text-sm text-[var(--color-text-muted)] text-center py-8",children:"Add bills to see your category breakdown"}):T.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-6",children:[T.jsx("div",{className:"w-48 h-48 flex-shrink-0",children:T.jsx(m,{width:"100%",height:"100%",children:T.jsxs(v,{children:[T.jsx(j,{data:s,cx:"50%",cy:"50%",innerRadius:45,outerRadius:75,paddingAngle:2,dataKey:"value",children:s.map((e,t)=>T.jsx(N,{fill:e.color},t))}),T.jsx(f,{contentStyle:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"8px",fontFamily:"Space Mono",fontSize:"12px"},formatter:e=>Lt(e)})]})})}),T.jsx("div",{className:"flex-1 w-full space-y-2",children:t.map(e=>T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:gt[e.category]}}),T.jsx("span",{className:"text-sm flex-1",children:pt[e.category]}),T.jsx("span",{className:"text-sm font-mono text-[var(--color-text-secondary)]",children:Lt(e.total)}),T.jsxs("span",{className:"text-xs text-[var(--color-text-muted)] w-12 text-right",children:[e.percentage.toFixed(1),"%"]})]},e.category))})]})]})}function _t({bills:e,incomes:t,months:s=6}){const a=n.useMemo(()=>$t(e,t,new Date,s),[e,t,s]).map(e=>({name:e.label,income:Math.round(e.totalIncome),expenses:Math.round(e.totalExpenses),net:Math.round(e.netCashFlow)}));return T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Income vs Expenses"}),T.jsx("div",{className:"h-56",children:T.jsx(m,{width:"100%",height:"100%",children:T.jsxs(w,{data:a,margin:{top:5,right:10,left:0,bottom:0},children:[T.jsx(h,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),T.jsx(p,{dataKey:"name",stroke:"var(--color-text-muted)",fontSize:11,fontFamily:"Space Mono"}),T.jsx(g,{stroke:"var(--color-text-muted)",fontSize:11,fontFamily:"Space Mono",tickFormatter:e=>`$${(e/1e3).toFixed(1)}k`}),T.jsx(f,{contentStyle:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"8px",fontSize:"12px"},formatter:e=>Lt(e)}),T.jsx(y,{wrapperStyle:{fontFamily:"Space Mono",fontSize:"11px"}}),T.jsx(k,{dataKey:"income",fill:"#39ff14",radius:[4,4,0,0],name:"Income"}),T.jsx(k,{dataKey:"expenses",fill:"#ff0080",radius:[4,4,0,0],name:"Expenses"})]})})})]})}function Gt({bills:e,incomes:t}){const s=n.useMemo(()=>{if(0===t.length||0===e.length)return null;const n=t.reduce((e,t)=>e+Mt(t),0),s=new Map;for(const t of e){const e=Ct(t.amount,t.frequency);s.set(t.category,(s.get(t.category)||0)+e)}const a=Array.from(s.entries()).sort((e,t)=>t[1]-e[1]),r=a.reduce((e,[,t])=>e+t,0),o=Math.max(n-r,0),l=300,i=[];let c=10;for(const e of t){const t=Mt(e),s=Math.max(t/n*260,12);i.push({label:e.name,amount:t,color:"#39ff14",x:20,y:c,height:s}),c+=s+6}const d=[];c=10;for(const[e,t]of a){const s=Math.max(t/n*260,12);d.push({label:pt[e],amount:t,color:gt[e],x:460,y:c,height:s}),c+=s+6}if(o>0){const e=Math.max(o/n*260,12);d.push({label:"Savings",amount:o,color:"#00fff9",x:460,y:c,height:e})}return{incomeNodes:i,catNodes:d,svgWidth:600,svgHeight:l,totalIncome:n}},[e,t]);if(!s)return T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-2",children:"Money Flow"}),T.jsx("p",{className:"text-sm text-[var(--color-text-muted)] text-center py-8",children:"Add income and bills to see your money flow"})]});const{incomeNodes:a,catNodes:r,svgWidth:o,svgHeight:l}=s;return T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Money Flow"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("svg",{viewBox:`0 0 ${o} ${l}`,className:"w-full",style:{minWidth:400,maxHeight:300},children:[a.map((e,t)=>r.map((n,o)=>{const l=n.amount/(s.totalIncome||1),i=e.height*l;if(i<.5)return null;const c=e.x+16,d=e.y+o/r.length*e.height,x=n.x,m=n.y+t/a.length*n.height,u=(c+x)/2;return T.jsx("path",{d:`M ${c} ${d} C ${u} ${d}, ${u} ${m}, ${x} ${m}`,fill:"none",stroke:n.color,strokeWidth:Math.max(i,1),opacity:.15},`${t}-${o}`)})),a.map((e,t)=>T.jsxs("g",{children:[T.jsx("rect",{x:e.x,y:e.y,width:16,height:e.height,rx:4,fill:e.color,opacity:.8}),T.jsxs("text",{x:e.x+22,y:e.y+e.height/2+4,fontSize:10,fontFamily:"Space Mono",fill:"var(--color-text-secondary)",children:[e.label," (",Lt(e.amount),")"]})]},`inc-${t}`)),r.map((e,t)=>T.jsxs("g",{children:[T.jsx("rect",{x:e.x,y:e.y,width:16,height:e.height,rx:4,fill:e.color,opacity:.8}),T.jsxs("text",{x:e.x+22,y:e.y+e.height/2+4,fontSize:10,fontFamily:"Space Mono",fill:"var(--color-text-secondary)",children:[e.label," (",Lt(e.amount),")"]})]},`cat-${t}`))]})})]})}function Zt({data:e}){const t=e.map(e=>({...e,positive:e.changePercent>=0?e.changePercent:0,negative:e.changePercent<0?e.changePercent:0}));return T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Spending Velocity"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mb-4",children:"Month-over-month expense change rate with rolling average"}),T.jsx("div",{className:"h-56",children:T.jsx(m,{width:"100%",height:"100%",children:T.jsxs(S,{data:t,margin:{top:5,right:10,left:0,bottom:0},children:[T.jsx(h,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.05)"}),T.jsx(p,{dataKey:"label",stroke:"var(--color-text-muted)",fontSize:11,fontFamily:"Space Mono"}),T.jsx(g,{stroke:"var(--color-text-muted)",fontSize:11,fontFamily:"Space Mono",tickFormatter:e=>`${e.toFixed(0)}%`}),T.jsx(f,{contentStyle:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"8px",fontSize:"12px"},formatter:(e,t)=>[`${e.toFixed(1)}%`,"positive"===t?"Increase":"negative"===t?"Decrease":"Moving Avg"]}),T.jsx(C,{y:0,stroke:"rgba(255,255,255,0.2)"}),T.jsx(k,{dataKey:"positive",fill:"#39ff14",radius:[4,4,0,0]}),T.jsx(k,{dataKey:"negative",fill:"#ff4444",radius:[0,0,4,4]}),T.jsx(M,{type:"monotone",dataKey:"movingAvg",stroke:"#00fff9",strokeWidth:2,dot:!1,name:"Avg Expenses"})]})})})]})}function Xt({bills:e}){const t=n.useMemo(()=>{if(0===e.length)return[];const t=new Map;for(const s of e){const e=Ct(s.amount,s.frequency);t.set(s.category,(t.get(s.category)||0)+e)}const n=Math.max(...t.values(),1);return Array.from(t.entries()).map(([e,t])=>({category:pt[e],current:Math.round(t),fullMark:Math.round(1.2*n)})).sort((e,t)=>t.current-e.current)},[e]);return t.length<3?T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-2",children:"Spending Radar"}),T.jsx("p",{className:"text-sm text-[var(--color-text-muted)] text-center py-8",children:"Add bills in 3+ categories to see radar"})]}):T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Spending Radar"}),T.jsx("div",{className:"h-64",children:T.jsx(m,{width:"100%",height:"100%",children:T.jsxs(A,{data:t,children:[T.jsx(z,{stroke:"rgba(255,255,255,0.1)"}),T.jsx(D,{dataKey:"category",tick:{fill:"var(--color-text-secondary)",fontSize:11,fontFamily:"Space Mono"}}),T.jsx($,{tick:{fill:"var(--color-text-muted)",fontSize:10},tickFormatter:e=>`$${e}`}),T.jsx(F,{name:"Current",dataKey:"current",stroke:"#ff0080",fill:"#ff0080",fillOpacity:.2,strokeWidth:2}),T.jsx(f,{contentStyle:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"8px",fontSize:"12px"},formatter:e=>[`$${e}`,"Monthly"]})]})})})]})}function Jt(e){return e>=75?"#39ff14":e>=55?"#00fff9":e>=35?"#ffff00":"#ff4444"}function Qt({score:e,size:t=180}){const n=(t-20)/2,s=t/2,a=t/2,r=Math.PI*n,o=e.overall/100*r,l=Jt(e.overall);return T.jsxs("div",{className:"flex flex-col items-center",children:[T.jsxs("svg",{width:t,height:t/2+20,viewBox:`0 0 ${t} ${t/2+20}`,children:[T.jsx("path",{d:`M ${s-n} ${a} A ${n} ${n} 0 0 1 ${s+n} ${a}`,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:10,strokeLinecap:"round"}),T.jsx("path",{d:`M ${s-n} ${a} A ${n} ${n} 0 0 1 ${s+n} ${a}`,fill:"none",stroke:l,strokeWidth:10,strokeLinecap:"round",strokeDasharray:`${r}`,strokeDashoffset:r-o,style:{filter:`drop-shadow(0 0 8px ${l}40)`}}),T.jsx("text",{x:s,y:a-8,textAnchor:"middle",className:"fill-current",style:{fontSize:"32px",fontFamily:"Orbitron, sans-serif",fontWeight:700,fill:l},children:e.overall}),T.jsx("text",{x:s,y:a+12,textAnchor:"middle",style:{fontSize:"11px",fontFamily:"Space Mono",fill:"var(--color-text-muted)"},children:"/ 100"})]}),T.jsxs("div",{className:"text-center mt-1",children:[T.jsxs("span",{className:"text-lg font-bold font-display",style:{color:l},children:["Grade: ",e.grade]}),T.jsxs("p",{className:"text-xs text-[var(--color-text-muted)] capitalize",children:[e.riskLevel," risk"]})]}),T.jsx("div",{className:"w-full mt-4 space-y-1.5",children:Object.entries(e.breakdown).map(([e,t])=>T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"text-xs text-[var(--color-text-secondary)] flex-1 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),T.jsx("div",{className:"w-24 h-1.5 bg-white/5 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${t}%`,backgroundColor:Jt(t)}})}),T.jsx("span",{className:"text-xs font-mono w-8 text-right",style:{color:Jt(t)},children:t})]},e))})]})}function en({bills:e}){const t=n.useMemo(()=>{if(0===e.length)return[];const t=e.map(e=>Ct(e.amount,e.frequency)),n=Ft(t),s=It(t),a=Math.max(...t),r=Math.max(Math.ceil(a/8),25),o=[];for(let e=0;e<=a;e+=r){const l=e+r,i=t.filter(t=>t>=e&&t<l).length;(i>0||e<a)&&o.push({range:`$${e}-${l}`,count:i,isOutlier:e>=n+2*s,from:e})}return o},[e]);return e.length<2?T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-2",children:"Bill Distribution"}),T.jsx("p",{className:"text-sm text-[var(--color-text-muted)] text-center py-8",children:"Add more bills to see distribution"})]}):T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-1",children:"Bill Distribution"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mb-4",children:"Monthly amounts histogram · Red = outliers"}),T.jsx("div",{className:"h-48",children:T.jsx(m,{width:"100%",height:"100%",children:T.jsxs(w,{data:t,margin:{top:0,right:0,left:0,bottom:0},children:[T.jsx(p,{dataKey:"range",stroke:"var(--color-text-muted)",fontSize:10,fontFamily:"Space Mono"}),T.jsx(g,{stroke:"var(--color-text-muted)",fontSize:10,allowDecimals:!1}),T.jsx(f,{contentStyle:{backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border)",borderRadius:"8px",fontSize:"12px"},formatter:e=>[`${e} bill${1!==e?"s":""}`,"Count"]}),T.jsx(k,{dataKey:"count",radius:[4,4,0,0],children:t.map((e,t)=>T.jsx(N,{fill:e.isOutlier?"#ff4444":"#b026ff"},t))})]})})})]})}function tn({values:e,width:t=80,height:n=28,color:s,showTrend:a=!0}){if(e.length<2)return null;const r=Math.min(...e),o=Math.max(...e)-r||1,l=e[e.length-1]-e[0],i=s||(l>=0?"#39ff14":"#ff4444"),c=e.map((s,a)=>`${2+a/(e.length-1)*(t-4)},${2+(1-(s-r)/o)*(n-4)}`).join(" ");return T.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[T.jsxs("svg",{width:t,height:n,className:"flex-shrink-0",children:[T.jsx("polyline",{points:c,fill:"none",stroke:i,strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),e.length>0&&T.jsx("circle",{cx:2+(e.length-1)/(e.length-1)*(t-4),cy:2+(1-(e[e.length-1]-r)/o)*(n-4),r:2,fill:i})]}),a&&T.jsxs("span",{className:"text-xs font-mono",style:{color:i},children:[l>=0?"+":"",(l/(e[0]||1)*100).toFixed(0),"%"]})]})}const nn={info:{icon:me,borderClass:"border-l-neon-cyan",bgClass:"bg-neon-cyan/5",iconClass:"text-neon-cyan"},success:{icon:ee,borderClass:"border-l-neon-green",bgClass:"bg-neon-green/5",iconClass:"text-neon-green"},warning:{icon:G,borderClass:"border-l-neon-yellow",bgClass:"bg-neon-yellow/5",iconClass:"text-neon-yellow"},critical:{icon:ze,borderClass:"border-l-red-500",bgClass:"bg-red-500/5",iconClass:"text-red-400"}};function sn({insight:e,onDismiss:t}){const n=nn[e.severity],s=n.icon;return T.jsxs("div",{className:x("border-l-4 rounded-r-lg p-3 flex items-start gap-3",n.borderClass,n.bgClass),children:[T.jsx(s,{size:18,className:x("flex-shrink-0 mt-0.5",n.iconClass)}),T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("h4",{className:"text-sm font-semibold",children:e.title}),e.metric&&T.jsx("span",{className:"text-xs font-mono text-[var(--color-text-muted)] bg-white/5 px-1.5 py-0.5 rounded",children:e.metric})]}),T.jsx("p",{className:"text-xs text-[var(--color-text-secondary)] mt-0.5",children:e.description})]}),t&&T.jsx("button",{onClick:()=>t(e.id),className:"text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)] text-xs","aria-label":"Dismiss",children:"×"})]})}const an=[{label:"Analyze spending",prompt:"Analyze my spending patterns and suggest optimizations."},{label:"Savings advice",prompt:"How can I improve my savings rate? Give specific suggestions."},{label:"Risk assessment",prompt:"Assess my financial risk and what I should do to improve."},{label:"Budget plan",prompt:"Create a suggested monthly budget based on my income and expenses."},{label:"Reduce bills",prompt:"Which bills or categories should I focus on reducing first?"}],rn=it((e,t)=>({apiKey:localStorage.getItem("finvis-ai-key")||"",enabled:"true"===localStorage.getItem("finvis-ai-enabled"),messages:[],loading:!1,error:null,setApiKey:t=>{localStorage.setItem("finvis-ai-key",t),e({apiKey:t})},setEnabled:t=>{localStorage.setItem("finvis-ai-enabled",String(t)),e({enabled:t})},sendMessage:async(n,s,a,r)=>{const{apiKey:o,messages:l}=t();if(!o)return void e({error:"API key not configured. Go to Settings to add your Claude API key."});e({loading:!0,error:null});const i=[...l,{role:"user",content:n}];e({messages:i});try{const t=await async function(e,t,n,s,a){var r;const o={model:"claude-sonnet-4-5-20250929",max_tokens:1024,system:`${t}\n\n${n}`,messages:[...s.map(e=>({role:e.role,content:e.content})),{role:"user",content:a}]},l=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(o)});if(!l.ok){const e=await l.text();throw new Error(`API error ${l.status}: ${e}`)}const i=null==(r=(await l.json()).content)?void 0:r.find(e=>"text"===e.type);return(null==i?void 0:i.text)||"No response generated."}(o,"You are FinVis AI, a helpful and non-judgmental financial advisor built into a privacy-first finance app. Your role:\n\n1. Analyze the user's financial data and provide actionable insights\n2. Be encouraging, never shaming about spending\n3. Focus on practical, specific suggestions\n4. Use the financial context provided to give personalized advice\n5. Keep responses concise (2-3 paragraphs max)\n6. Use currency formatting and percentages when relevant\n7. If asked about something outside your financial context, politely redirect\n\nImportant: All user financial data stays on their device. You only see aggregated summaries, never raw transaction data.",function(e,t,n){const s=zt(t),a=At(e),r=s>0?(s-a)/s*100:0,o=Dt(e).map(e=>`  ${pt[e.category]}: ${Lt(e.total)}/mo (${e.percentage.toFixed(1)}%)`).join("\n");return`Financial Overview:\n- Monthly income: ${Lt(s)} from ${t.length} source(s)\n- Monthly expenses: ${Lt(a)} across ${e.length} bill(s)\n- Net monthly: ${Lt(s-a)}\n- Savings rate: ${r.toFixed(1)}%\n- Financial health score: ${n.overall}/100 (Grade: ${n.grade}, ${n.riskLevel} risk)\n\nCategory Breakdown:\n${o}\n\nHealth Score Breakdown:\n- Savings Rate: ${n.breakdown.savingsRate}/100\n- Income Stability: ${n.breakdown.incomeStability}/100\n- Expense Flexibility: ${n.breakdown.expenseFlexibility}/100\n- Emergency Runway: ${n.breakdown.emergencyRunway}/100\n- Bill Concentration: ${n.breakdown.billConcentration}/100`}(s,a,r),l,n);e({messages:[...i,{role:"assistant",content:t}],loading:!1})}catch(c){e({error:c instanceof Error?c.message:"Failed to get AI response",loading:!1})}},clearHistory:()=>e({messages:[],error:null})}));function on(){const{messages:e,loading:t,error:s,enabled:a,sendMessage:r,clearHistory:o}=rn(),l=vt(e=>e.bills),i=wt(e=>e.incomes),[c,d]=n.useState(""),[m,u]=n.useState(!1),h=n.useRef(null);if(n.useEffect(()=>{var e;null==(e=h.current)||e.scrollTo(0,h.current.scrollHeight)},[e]),!a)return null;const p=Rt(l,i),g=async()=>{const e=c.trim();e&&!t&&(d(""),await r(e,l,i,p))};return T.jsxs("div",{className:"rounded-xl border border-[var(--color-border)] bg-[var(--color-bg-secondary)] overflow-hidden",children:[T.jsxs("button",{onClick:()=>u(!m),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(J,{size:20,className:"text-neon-purple"}),T.jsx("h3",{className:"text-sm font-bold font-display",children:"FinVis AI"}),T.jsx("span",{className:"text-[10px] bg-neon-purple/20 text-neon-purple px-1.5 py-0.5 rounded-full",children:"Claude"})]}),m?T.jsx(ne,{size:16}):T.jsx(re,{size:16})]}),!m&&T.jsxs("div",{className:"border-t border-[var(--color-border)]",children:[T.jsxs("div",{ref:h,className:"h-64 overflow-y-auto p-4 space-y-3",children:[0===e.length&&T.jsxs("div",{className:"text-center py-6",children:[T.jsx(J,{size:32,className:"mx-auto text-[var(--color-text-muted)] mb-2"}),T.jsx("p",{className:"text-sm text-[var(--color-text-secondary)]",children:"Ask me anything about your finances"}),T.jsx("div",{className:"flex flex-wrap gap-2 justify-center mt-3",children:an.map(e=>T.jsx("button",{onClick:()=>(async e=>{t||await r(e,l,i,p)})(e.prompt),className:"text-xs px-2.5 py-1 rounded-full border border-[var(--color-border)] text-[var(--color-text-secondary)] hover:border-neon-purple hover:text-neon-purple transition-colors",children:e.label},e.label))})]}),e.map((e,t)=>T.jsx("div",{className:x("text-sm rounded-lg p-3 max-w-[90%]","user"===e.role?"bg-neon-pink/10 ml-auto":"bg-white/5"),children:T.jsx("p",{className:"whitespace-pre-wrap",children:e.content})},t)),t&&T.jsx("div",{className:"bg-white/5 rounded-lg p-3 max-w-[90%]",children:T.jsxs("div",{className:"flex items-center gap-2 text-sm text-[var(--color-text-muted)]",children:[T.jsx("div",{className:"w-2 h-2 bg-neon-purple rounded-full animate-pulse"}),"Thinking..."]})}),s&&T.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 rounded-lg p-2",children:s})]}),T.jsxs("div",{className:"p-3 border-t border-[var(--color-border)] flex gap-2",children:[T.jsx("input",{value:c,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&g(),placeholder:"Ask FinVis AI...",className:"flex-1 bg-[var(--color-bg-primary)] border border-[var(--color-border)] rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-neon-purple",disabled:t}),T.jsx("button",{onClick:g,disabled:t||!c.trim(),className:"p-2 rounded-lg bg-neon-purple/20 text-neon-purple hover:bg-neon-purple/30 transition-colors disabled:opacity-50",children:T.jsx(je,{size:16})}),e.length>0&&T.jsx("button",{onClick:o,className:"p-2 rounded-lg hover:bg-white/10 text-[var(--color-text-muted)] transition-colors","aria-label":"Clear chat",children:T.jsx(Se,{size:16})})]})]})]})}function ln(){return T.jsx("div",{className:"flex items-center justify-center py-16",children:T.jsx("div",{className:"w-10 h-10 border-4 border-[var(--color-border)] border-t-neon-pink rounded-full animate-spin"})})}function cn(){const{bills:e,loading:t,loadBills:s}=vt(),{incomes:a,loading:r,loadIncomes:o}=wt(),[l,i]=n.useState(new Set);n.useEffect(()=>{s(),o()},[s,o]);const c=n.useMemo(()=>zt(a),[a]),d=n.useMemo(()=>At(e),[e]),m=n.useMemo(()=>function(e,t){const n=e.reduce((e,t)=>e+Ct(t.amount,t.frequency),0),s=t-n;return{totalExpenses:n,remaining:s,savingsRate:t>0?s/t*100:0,billCount:e.length,paidCount:e.filter(e=>e.isPaid).length}}(e,c),[e,c]),u=n.useMemo(()=>Rt(e,a),[e,a]),h=n.useMemo(()=>function(e,t){const n=[],s=zt(t),a=At(e),r=s>0?(s-a)/s*100:0;if(0===e.length&&0===t.length)return[{id:"empty",title:"Get Started",description:"Add your income sources and bills to unlock smart insights.",severity:"info",category:"setup"}];r>=30?n.push({id:"savings-excellent",title:"Excellent Savings Rate",description:`You're saving ${r.toFixed(1)}% of your income. Outstanding financial discipline.`,severity:"success",category:"savings",metric:`${r.toFixed(1)}%`}):r>=15?n.push({id:"savings-good",title:"Healthy Savings Rate",description:`Saving ${r.toFixed(1)}% — above the recommended 15% minimum.`,severity:"success",category:"savings",metric:`${r.toFixed(1)}%`}):r>=0?n.push({id:"savings-low",title:"Low Savings Rate",description:`Only ${r.toFixed(1)}% savings rate. Consider reducing variable expenses to hit the 15% target.`,severity:"warning",category:"savings",metric:`${r.toFixed(1)}%`}):n.push({id:"savings-negative",title:"Spending Exceeds Income",description:`You're spending ${Lt(Math.abs(s-a))} more than you earn monthly. This is unsustainable.`,severity:"critical",category:"savings",metric:Lt(s-a)});const o=Dt(e)[0];if(o&&o.percentage>50&&n.push({id:"concentration-high",title:"High Spending Concentration",description:`${pt[o.category]} accounts for ${o.percentage.toFixed(0)}% of all spending. Consider diversifying costs.`,severity:"warning",category:"concentration",metric:`${o.percentage.toFixed(0)}%`}),e.length>=3){const t=e.map(e=>Ct(e.amount,e.frequency));for(let s=0;s<e.length;s++)Et(t[s],t)>2&&n.push({id:`anomaly-${e[s].id}`,title:"Unusually High Bill",description:`"${e[s].name}" at ${Lt(t[s])}/mo is significantly higher than your average bill (${Lt(Ft(t))}/mo).`,severity:"info",category:"anomaly",metric:Lt(t[s])})}const l=$t(e,t,new Date,6).filter(e=>e.netCashFlow<0);if(l.length>0&&n.push({id:"forecast-tight",title:`${l.length} Tight Month${l.length>1?"s":""} Ahead`,description:`${l.map(e=>e.label).join(", ")} show negative cash flow. Plan ahead.`,severity:l.length>=3?"critical":"warning",category:"forecast",metric:`${l.length} months`}),e.length>=2){const s=qt(e,t,6);s.heaviestWeek.amount>0&&n.push({id:"heavy-week",title:"Heaviest Payment Period",description:`${s.heaviestWeek.weekLabel} is your heaviest payment window at ${Lt(s.heaviestWeek.amount)}/mo. Consider spreading due dates.`,severity:"info",category:"pattern",metric:s.heaviestWeek.weekLabel}),s.fixedVsVariableRatio.ratio>.75&&n.push({id:"inflexible",title:"High Fixed Costs",description:`${(100*s.fixedVsVariableRatio.ratio).toFixed(0)}% of spending is fixed (housing, insurance, debt). Limited room to cut in emergencies.`,severity:"warning",category:"flexibility",metric:`${(100*s.fixedVsVariableRatio.ratio).toFixed(0)}%`})}const i=Rt(e,t);n.push({id:"health-score",title:`Financial Health: ${i.grade}`,description:`Overall score: ${i.overall}/100 (${i.riskLevel} risk). ${i.overall>=70?"Keep it up!":"Room for improvement."}`,severity:i.overall>=70?"success":i.overall>=45?"warning":"critical",category:"health",metric:`${i.overall}/100`}),1===t.length&&n.push({id:"single-income",title:"Single Income Source",description:"All income comes from one source. Consider diversifying to reduce risk.",severity:"info",category:"income",metric:"1 source"});const c=e.filter(e=>"subscriptions"===e.category);if(c.length>=5){const e=c.reduce((e,t)=>e+Ct(t.amount,t.frequency),0);n.push({id:"sub-audit",title:"Subscription Audit Recommended",description:`You have ${c.length} subscriptions totaling ${Lt(e)}/mo. Review for unused services.`,severity:"info",category:"optimization",metric:Lt(e)})}const d={critical:0,warning:1,success:2,info:3};return n.sort((e,t)=>d[e.severity]-d[t.severity]),n}(e,a),[e,a]),p=n.useMemo(()=>qt(e,a,6),[e,a]),g=n.useMemo(()=>$t(e,a,new Date,6),[e,a]),f=g.map(e=>e.totalIncome),y=g.map(e=>e.totalExpenses),b=g.map(e=>e.runningBalance),v=h.filter(e=>!l.has(e.id)),j=m.remaining>=0;return t||r?T.jsx(ln,{}):T.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[T.jsxs("header",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold font-display bg-gradient-to-r from-neon-pink via-neon-purple to-neon-cyan bg-clip-text text-transparent",children:"Dashboard"}),T.jsx("p",{className:"text-sm text-[var(--color-text-secondary)] mt-1",children:"Financial command center"})]}),T.jsx("div",{className:"flex items-center gap-2",children:T.jsxs("div",{className:x("px-3 py-1.5 rounded-full text-xs font-bold font-mono border",u.overall>=70?"border-neon-green/30 text-neon-green bg-neon-green/10":u.overall>=45?"border-neon-yellow/30 text-neon-yellow bg-neon-yellow/10":"border-red-500/30 text-red-400 bg-red-500/10"),children:["Health: ",u.overall,"/100"]})})]}),T.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(ie,{size:16,className:"text-neon-green"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Monthly Income"})]}),T.jsx("p",{className:"text-xl font-bold font-mono text-neon-green",children:Lt(c)}),T.jsx("div",{className:"mt-2",children:T.jsx(tn,{values:f,color:"#39ff14"})})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(ve,{size:16,className:"text-neon-pink"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Monthly Expenses"})]}),T.jsx("p",{className:"text-xl font-bold font-mono text-neon-pink",children:Lt(d)}),T.jsx("div",{className:"mt-2",children:T.jsx(tn,{values:y,color:"#ff0080"})})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j?T.jsx(ye,{size:16,className:"text-neon-green"}):T.jsx(G,{size:16,className:"text-red-400"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Net Cash Flow"})]}),T.jsxs("p",{className:x("text-xl font-bold font-mono",j?"text-neon-green":"text-red-400"),children:[j?"+":"",Lt(m.remaining)]}),T.jsx("div",{className:"mt-2",children:T.jsx(tn,{values:b})})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(_,{size:16,className:"text-neon-purple"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Savings Rate"})]}),T.jsxs("p",{className:x("text-xl font-bold font-mono",m.savingsRate>20?"text-neon-green":m.savingsRate>0?"text-neon-yellow":"text-red-400"),children:[m.savingsRate.toFixed(1),"%"]}),T.jsxs("div",{className:"mt-2 flex items-center gap-1.5",children:[m.savingsRate>=15?T.jsx(Me,{size:14,className:"text-neon-green"}):T.jsx(Ce,{size:14,className:"text-red-400"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:m.savingsRate>=15?"On target":"Below 15% target"})]})]})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center justify-between mb-3",children:[T.jsx("h3",{className:"text-sm font-semibold text-[var(--color-text-secondary)]",children:"Bills Paid This Month"}),T.jsxs("span",{className:"text-sm font-mono",children:[m.paidCount,"/",m.billCount]})]}),T.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full bg-gradient-to-r from-neon-pink to-neon-cyan rounded-full transition-all",style:{width:(m.billCount>0?m.paidCount/m.billCount*100:0)+"%"}})})]}),v.length>0&&T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx(Q,{size:18,className:"text-neon-purple"}),T.jsx("h2",{className:"text-lg font-bold font-display",children:"Smart Insights"}),T.jsx("span",{className:"text-xs bg-neon-purple/20 text-neon-purple px-2 py-0.5 rounded-full",children:v.length})]}),T.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:v.map(e=>T.jsx(sn,{insight:e,onDismiss:e=>i(t=>new Set([...t,e]))},e.id))})]}),T.jsx(on,{}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[T.jsx(Ut,{bills:e,incomes:a}),T.jsx(_t,{bills:e,incomes:a})]}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[T.jsx(Yt,{bills:e}),T.jsx(Gt,{bills:e,incomes:a})]}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[T.jsx(Zt,{data:p.spendingVelocity}),T.jsx(Xt,{bills:e})]}),T.jsx(Kt,{bills:e}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Financial Health"}),T.jsx(Qt,{score:u})]}),T.jsx(en,{bills:e})]})]})}function dn({bill:e,onEdit:t,onDelete:n,onTogglePaid:s}){const a=Ct(e.amount,e.frequency);return T.jsx(Vt,{hover:!0,className:x("relative",e.isPaid&&"opacity-60"),children:T.jsxs("div",{className:"flex items-start justify-between gap-3",children:[T.jsxs("div",{className:"flex-1 min-w-0",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[T.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:gt[e.category]}}),T.jsx("h4",{className:"font-semibold truncate",children:e.name}),e.isPaid&&T.jsx("span",{className:"text-xs bg-neon-green/20 text-neon-green px-2 py-0.5 rounded-full",children:"Paid"})]}),T.jsxs("div",{className:"flex items-baseline gap-2",children:[T.jsx("span",{className:"text-xl font-mono font-bold text-neon-cyan",children:Lt(e.amount)}),T.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["/ ",ht[e.frequency].toLowerCase()]})]}),"monthly"!==e.frequency&&T.jsxs("p",{className:"text-xs text-[var(--color-text-muted)] font-mono mt-0.5",children:[Lt(a),"/mo equivalent"]}),T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx("span",{className:"text-xs text-[var(--color-text-secondary)] bg-white/5 px-2 py-0.5 rounded",children:pt[e.category]}),T.jsxs("span",{className:"text-xs text-[var(--color-text-muted)]",children:["Due: Day ",e.dueDay]})]}),e.notes&&T.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mt-2 italic",children:e.notes})]}),T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("button",{onClick:()=>s(e.id),className:x("p-1.5 rounded-lg transition-colors",e.isPaid?"bg-neon-green/20 text-neon-green":"hover:bg-white/10 text-[var(--color-text-muted)]"),"aria-label":e.isPaid?"Mark unpaid":"Mark paid",children:T.jsx(te,{size:16})}),T.jsx("button",{onClick:()=>t(e),className:"p-1.5 rounded-lg hover:bg-white/10 text-[var(--color-text-muted)] transition-colors","aria-label":"Edit bill",children:T.jsx(fe,{size:16})}),T.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-lg hover:bg-red-500/10 text-[var(--color-text-muted)] hover:text-red-400 transition-colors","aria-label":"Delete bill",children:T.jsx(Se,{size:16})})]})]})})}function xn({variant:e="primary",size:t="md",children:n,className:s,...a}){return T.jsx("button",{className:x("inline-flex items-center justify-center gap-2 rounded-lg font-semibold transition-all","disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gradient-to-r from-neon-pink via-neon-purple to-neon-cyan text-white hover:shadow-glow-pink hover:-translate-y-0.5 active:translate-y-0":"primary"===e,"border-2 border-neon-cyan text-neon-cyan hover:bg-neon-cyan/10":"secondary"===e,"border-2 border-red-500 text-red-400 hover:bg-red-500/10":"danger"===e,"text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] hover:bg-white/5":"ghost"===e},{"px-3 py-1.5 text-sm":"sm"===t,"px-5 py-2.5 text-sm":"md"===t,"px-6 py-3 text-base":"lg"===t},s),...a,children:n})}function mn({label:e,hint:t,error:n,prefix:s,className:a,id:r,...o}){const l=r||e.toLowerCase().replace(/\s+/g,"-");return T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{htmlFor:l,className:"text-sm font-semibold text-[var(--color-text-primary)]",children:e}),T.jsxs("div",{className:"relative",children:[s&&T.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-text-muted)] font-mono",children:s}),T.jsx("input",{id:l,className:x("w-full rounded-lg border-2 border-[var(--color-border)] bg-[var(--color-bg-secondary)]","px-3 py-2.5 text-[var(--color-text-primary)]","transition-colors focus:border-[var(--color-accent)] focus:outline-none","placeholder:text-[var(--color-text-muted)]",s&&"pl-8",n&&"border-red-500",a),"aria-describedby":t?`${l}-hint`:void 0,"aria-invalid":!!n,...o})]}),t&&!n&&T.jsx("span",{id:`${l}-hint`,className:"text-xs text-[var(--color-text-muted)]",children:t}),n&&T.jsx("span",{role:"alert",className:"text-xs text-red-400",children:n})]})}function un({label:e,options:t,className:n,id:s,...a}){const r=s||e.toLowerCase().replace(/\s+/g,"-");return T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{htmlFor:r,className:"text-sm font-semibold text-[var(--color-text-primary)]",children:e}),T.jsx("select",{id:r,className:x("w-full rounded-lg border-2 border-[var(--color-border)] bg-[var(--color-bg-secondary)]","px-3 py-2.5 text-[var(--color-text-primary)]","transition-colors focus:border-[var(--color-accent)] focus:outline-none",n),...a,children:t.map(e=>T.jsx("option",{value:e.value,children:e.label},e.value))})]})}function hn({bill:e,onSubmit:t,onCancel:s}){var a,r;const[o,l]=n.useState((null==e?void 0:e.name)||""),[i,c]=n.useState((null==(a=null==e?void 0:e.amount)?void 0:a.toString())||""),[d,x]=n.useState((null==e?void 0:e.frequency)||"monthly"),[m,u]=n.useState((null==e?void 0:e.category)||"other"),[h,p]=n.useState((null==e?void 0:e.type)||"ongoing"),[g,f]=n.useState((null==(r=null==e?void 0:e.dueDay)?void 0:r.toString())||"1"),[y,b]=n.useState((null==e?void 0:e.notes)||""),[v,j]=n.useState({});return T.jsxs("form",{onSubmit:n=>{n.preventDefault(),(()=>{const e={};o.trim()||(e.name="Name is required");const t=parseFloat(i);(!i||isNaN(t)||t<=0)&&(e.amount="Enter a valid amount");const n=parseInt(g);return(isNaN(n)||n<1||n>31)&&(e.dueDay="Enter a day between 1-31"),j(e),0===Object.keys(e).length})()&&t({...e||{},name:o.trim(),amount:parseFloat(i),frequency:d,category:m,type:h,dueDay:parseInt(g),notes:y.trim()||void 0})},className:"space-y-4",children:[T.jsx(mn,{label:"Bill Name",value:o,onChange:e=>l(e.target.value),placeholder:"e.g., Rent",error:v.name}),T.jsx(mn,{label:"Amount",type:"number",value:i,onChange:e=>c(e.target.value),placeholder:"0.00",prefix:"$",step:"0.01",min:"0",error:v.amount}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsx(un,{label:"Frequency",value:d,onChange:e=>x(e.target.value),options:Object.entries(ht).map(([e,t])=>({value:e,label:t}))}),T.jsx(un,{label:"Category",value:m,onChange:e=>u(e.target.value),options:Object.entries(pt).map(([e,t])=>({value:e,label:t}))})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsx(un,{label:"Type",value:h,onChange:e=>p(e.target.value),options:Object.entries(ft).map(([e,t])=>({value:e,label:t}))}),T.jsx(mn,{label:"Due Day",type:"number",value:g,onChange:e=>f(e.target.value),min:"1",max:"31",hint:"Day of month (1-31)",error:v.dueDay})]}),T.jsx(mn,{label:"Notes",value:y,onChange:e=>b(e.target.value),placeholder:"Optional notes..."}),T.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[T.jsx(xn,{type:"button",variant:"ghost",onClick:s,children:"Cancel"}),T.jsx(xn,{type:"submit",children:e?"Update Bill":"Add Bill"})]})]})}function pn({open:e,onClose:t,title:s,children:a}){return n.useEffect(()=>{if(!e)return;const n=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",n),document.body.style.overflow=""}},[e,t]),e?T.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[T.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),T.jsxs("div",{className:"relative w-full max-w-lg rounded-2xl bg-[var(--color-bg-primary)] border border-[var(--color-border)] shadow-2xl",children:[T.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--color-border)]",children:[T.jsx("h2",{id:"modal-title",className:"text-lg font-bold font-display",children:s}),T.jsx("button",{onClick:t,className:"rounded-full p-1.5 hover:bg-white/10 transition-colors","aria-label":"Close",children:T.jsx(De,{size:20})})]}),T.jsx("div",{className:"p-5",children:a})]})]}):null}function gn({icon:e,title:t,description:n,action:s}){return T.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center max-w-sm mx-auto",children:[T.jsx("div",{className:"text-[var(--color-text-muted)] mb-4",children:T.jsx(e,{size:56,strokeWidth:1})}),T.jsx("h3",{className:"text-xl font-bold mb-2",children:t}),T.jsx("p",{className:"text-sm text-[var(--color-text-secondary)] mb-6",children:n}),s]})}function fn(){const{bills:e,loading:t,loadBills:s,addBill:a,updateBill:r,deleteBill:o,togglePaid:l}=vt(),[i,c]=n.useState(!1),[d,x]=n.useState(),[m,u]=n.useState(null);n.useEffect(()=>{s()},[s]);const h=e=>{x(e),c(!0)};return t?T.jsx(ln,{}):T.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent",children:"Bills"}),T.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)] mt-1",children:[e.length," bill",1!==e.length?"s":""," tracked"]})]}),T.jsxs(xn,{onClick:()=>{x(void 0),c(!0)},children:[T.jsx(be,{size:18}),"Add Bill"]})]}),0===e.length?T.jsx(gn,{icon:ve,title:"No bills yet",description:"Get started by adding your first bill. We'll help you track and forecast your expenses.",action:T.jsxs(xn,{onClick:()=>c(!0),children:[T.jsx(be,{size:18}),"Add Your First Bill"]})}):T.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.map(e=>T.jsx(dn,{bill:e,onEdit:h,onDelete:e=>u(e),onTogglePaid:l},e.id))}),T.jsx(pn,{open:i,onClose:()=>{c(!1),x(void 0)},title:d?"Edit Bill":"Add Bill",children:T.jsx(hn,{bill:d,onSubmit:async e=>{d?await r({...d,...e}):await a(e),c(!1),x(void 0)},onCancel:()=>{c(!1),x(void 0)}})}),T.jsxs(pn,{open:!!m,onClose:()=>u(null),title:"Delete Bill?",children:[T.jsx("p",{className:"text-sm text-[var(--color-text-secondary)] mb-4",children:"Are you sure you want to delete this bill? This action cannot be undone."}),T.jsxs("div",{className:"flex justify-end gap-3",children:[T.jsx(xn,{variant:"ghost",onClick:()=>u(null),children:"Cancel"}),T.jsx(xn,{variant:"danger",onClick:()=>m&&(async e=>{await o(e),u(null)})(m),children:"Delete"})]})]})]})}function yn(){const{incomes:e,loading:t,loadIncomes:s,addIncome:a,updateIncome:r,deleteIncome:o}=wt(),[l,i]=n.useState(!1),[c,d]=n.useState(),[x,m]=n.useState(""),[u,h]=n.useState(""),[p,g]=n.useState("monthly");n.useEffect(()=>{s()},[s]);const f=()=>{m(""),h(""),g("monthly"),d(void 0)},y=zt(e);return t?T.jsx(ln,{}):T.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent",children:"Income"}),T.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)] mt-1",children:["Total monthly: ",T.jsx("span",{className:"font-mono text-neon-green",children:Lt(y)})]})]}),T.jsxs(xn,{onClick:()=>{f(),i(!0)},children:[T.jsx(be,{size:18}),"Add Income"]})]}),0===e.length?T.jsx(gn,{icon:ie,title:"No income set",description:"Add your income sources to see cash flow forecasts and spending analysis.",action:T.jsxs(xn,{onClick:()=>i(!0),children:[T.jsx(be,{size:18}),"Add Income"]})}):T.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.map(e=>T.jsx(Vt,{hover:!0,children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{children:[T.jsx("h4",{className:"font-semibold",children:e.name}),T.jsx("p",{className:"text-xl font-mono font-bold text-neon-green mt-1",children:Lt(e.amount)}),T.jsxs("p",{className:"text-xs text-[var(--color-text-muted)]",children:[jt[e.payPeriod]," ·"," ",Lt(Mt(e)),"/mo"]})]}),T.jsxs("div",{className:"flex gap-1",children:[T.jsx("button",{onClick:()=>(e=>{d(e),m(e.name),h(e.amount.toString()),g(e.payPeriod),i(!0)})(e),className:"p-1.5 rounded-lg hover:bg-white/10 text-[var(--color-text-muted)] transition-colors","aria-label":"Edit income",children:T.jsx(fe,{size:16})}),T.jsx("button",{onClick:()=>o(e.id),className:"p-1.5 rounded-lg hover:bg-red-500/10 text-[var(--color-text-muted)] hover:text-red-400 transition-colors","aria-label":"Delete income",children:T.jsx(Se,{size:16})})]})]})},e.id))}),T.jsx(pn,{open:l,onClose:()=>{i(!1),f()},title:c?"Edit Income":"Add Income",children:T.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=parseFloat(u);!x.trim()||isNaN(t)||t<=0||(c?await r({...c,name:x.trim(),amount:t,payPeriod:p}):await a({name:x.trim(),amount:t,payPeriod:p}),f(),i(!1))},className:"space-y-4",children:[T.jsx(mn,{label:"Source Name",value:x,onChange:e=>m(e.target.value),placeholder:"e.g., Primary Job"}),T.jsx(mn,{label:"Amount",type:"number",value:u,onChange:e=>h(e.target.value),placeholder:"0.00",prefix:"$",step:"0.01",min:"0"}),T.jsx(un,{label:"Pay Period",value:p,onChange:e=>g(e.target.value),options:Object.entries(jt).map(([e,t])=>({value:e,label:t}))}),T.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[T.jsx(xn,{type:"button",variant:"ghost",onClick:()=>{i(!1),f()},children:"Cancel"}),T.jsx(xn,{type:"submit",children:c?"Update":"Add Income"})]})]})})]})}const bn=[{id:"cut-subs-50",label:"Cut subscriptions 50%",description:"What if you halved all subscription costs?",apply:e=>e.map(e=>"subscriptions"===e.category?{...e,amount:.5*e.amount}:e)},{id:"cut-lifestyle-30",label:"Cut lifestyle 30%",description:"What if you reduced lifestyle spending by 30%?",apply:e=>e.map(e=>"lifestyle"===e.category?{...e,amount:.7*e.amount}:e)},{id:"lose-10pct",label:"Income drops 10%",description:"What if your income decreased by 10%?",apply:e=>e},{id:"cut-all-10",label:"Cut everything 10%",description:"What if you negotiated 10% off all bills?",apply:e=>e.map(e=>({...e,amount:.9*e.amount}))}];function vn(){var e,t;const{bills:s,loading:a,loadBills:r}=vt(),{incomes:o,loading:l,loadIncomes:i}=wt(),[c,d]=n.useState(6),[m,u]=n.useState(null);n.useEffect(()=>{r(),i()},[r,i]);const h=bn.find(e=>e.id===m),p=h?h.apply(s):s,g="lose-10pct"===m?o.map(e=>({...e,amount:.9*e.amount})):o,f=n.useMemo(()=>$t(p,g,new Date,c),[p,g,c]),y=n.useMemo(()=>$t(s,o,new Date,c),[s,o,c]),b=n.useMemo(()=>zt(g),[g]),v=n.useMemo(()=>At(p),[p]),j=n.useMemo(()=>Rt(p,g),[p,g]),N=n.useMemo(()=>function(e,t,n){const s=e-t;if(s>=0)return null;const a=n/Math.abs(s);return Math.floor(30*a)}(b,v,b),[b,v]);return a||l?T.jsx(ln,{}):0===s.length&&0===o.length?T.jsx("div",{className:"max-w-4xl mx-auto",children:T.jsx(gn,{icon:Me,title:"No data to forecast",description:"Add bills and income sources to see your cash flow forecast."})}):T.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[T.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent",children:"Forecast"}),T.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)] mt-1",children:[c,"-month cash flow projection",m&&T.jsx("span",{className:"text-neon-yellow ml-2",children:"(What-If active)"})]})]}),T.jsx("div",{className:"flex gap-2",children:[3,6,12].map(e=>T.jsxs(xn,{size:"sm",variant:c===e?"primary":"ghost",onClick:()=>d(e),children:[e,"mo"]},e))})]}),T.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(X,{size:16,className:"text-neon-green"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Monthly Income"})]}),T.jsx("p",{className:"text-xl font-mono font-bold text-neon-green",children:Lt(b)}),T.jsx(tn,{values:f.map(e=>e.totalIncome),color:"#39ff14"})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(Z,{size:16,className:"text-neon-pink"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Monthly Expenses"})]}),T.jsx("p",{className:"text-xl font-mono font-bold text-neon-pink",children:Lt(v)}),T.jsx(tn,{values:f.map(e=>e.totalExpenses),color:"#ff0080"})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[null!==N?T.jsx(G,{size:16,className:"text-neon-yellow"}):T.jsx(oe,{size:16,className:"text-neon-cyan"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Runway"})]}),T.jsx("p",{className:"text-xl font-mono font-bold",children:null!==N?T.jsxs("span",{className:"text-neon-yellow",children:[N," days"]}):T.jsx("span",{className:"text-neon-green",children:"Sustainable"})})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(we,{size:16,className:"text-neon-purple"}),T.jsx("span",{className:"text-xs text-[var(--color-text-muted)]",children:"Health Grade"})]}),T.jsxs("p",{className:x("text-xl font-mono font-bold",j.overall>=70?"text-neon-green":j.overall>=45?"text-neon-yellow":"text-red-400"),children:[j.grade," (",j.overall,"/100)"]})]})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx($e,{size:18,className:"text-neon-yellow"}),T.jsx("h3",{className:"text-sm font-bold font-display",children:"What-If Scenarios"})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[bn.map(e=>T.jsx("button",{onClick:()=>u(m===e.id?null:e.id),className:x("px-3 py-1.5 rounded-lg text-xs font-medium border transition-all",m===e.id?"border-neon-yellow text-neon-yellow bg-neon-yellow/10":"border-[var(--color-border)] text-[var(--color-text-secondary)] hover:border-neon-yellow/50"),title:e.description,children:e.label},e.id)),m&&T.jsx("button",{onClick:()=>u(null),className:"px-3 py-1.5 rounded-lg text-xs text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)]",children:"Reset"})]}),h&&T.jsx("p",{className:"text-xs text-neon-yellow/70 mt-2",children:h.description})]}),T.jsx(Ut,{bills:p,incomes:g,months:c}),T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Monthly Breakdown"}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full text-sm",children:[T.jsx("thead",{children:T.jsxs("tr",{className:"text-left text-[var(--color-text-muted)] border-b border-[var(--color-border)]",children:[T.jsx("th",{className:"pb-2 font-medium",children:"Risk"}),T.jsx("th",{className:"pb-2 font-medium",children:"Month"}),T.jsx("th",{className:"pb-2 font-medium text-right",children:"Income"}),T.jsx("th",{className:"pb-2 font-medium text-right",children:"Expenses"}),T.jsx("th",{className:"pb-2 font-medium text-right",children:"Net"}),T.jsx("th",{className:"pb-2 font-medium text-right",children:"Balance"}),m&&T.jsx("th",{className:"pb-2 font-medium text-right",children:"vs Base"})]})}),T.jsx("tbody",{children:f.map((e,t)=>{const n=e.netCashFlow>=.2*e.totalIncome?"bg-neon-green":e.netCashFlow>=0?"bg-neon-yellow":"bg-red-500",s=m&&y[t]?e.runningBalance-y[t].runningBalance:null;return T.jsxs("tr",{className:"border-b border-[var(--color-border)]/50",children:[T.jsx("td",{className:"py-2.5",children:T.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${n}`,title:e.netCashFlow>=.2*e.totalIncome?"Low risk":e.netCashFlow>=0?"Moderate risk":"High risk"})}),T.jsx("td",{className:"py-2.5 font-mono",children:e.label}),T.jsx("td",{className:"py-2.5 text-right font-mono text-neon-green",children:Lt(e.totalIncome)}),T.jsx("td",{className:"py-2.5 text-right font-mono text-neon-pink",children:Lt(e.totalExpenses)}),T.jsxs("td",{className:"py-2.5 text-right font-mono "+(e.netCashFlow>=0?"text-neon-green":"text-red-400"),children:[e.netCashFlow>=0?"+":"",Lt(e.netCashFlow)]}),T.jsx("td",{className:"py-2.5 text-right font-mono "+(e.runningBalance>=0?"text-neon-cyan":"text-red-400"),children:Lt(e.runningBalance)}),m&&T.jsx("td",{className:"py-2.5 text-right font-mono text-xs "+(null!==s&&s>=0?"text-neon-green":"text-red-400"),children:null!==s?`${s>=0?"+":""}${Lt(s)}`:"-"})]},t)})})]})}),T.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-[var(--color-text-muted)]",children:[T.jsxs("div",{className:"flex items-center gap-1.5",children:[T.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-neon-green"}),"Low risk"]}),T.jsxs("div",{className:"flex items-center gap-1.5",children:[T.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-neon-yellow"}),"Moderate"]}),T.jsxs("div",{className:"flex items-center gap-1.5",children:[T.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),"High risk"]})]})]}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[T.jsxs(Vt,{children:[T.jsxs("h3",{className:"text-lg font-bold font-display mb-4",children:["Financial Health",m&&T.jsx("span",{className:"text-xs text-neon-yellow ml-2",children:"(Scenario)"})]}),T.jsx(Qt,{score:j})]}),T.jsxs(Vt,{children:[T.jsx("h3",{className:"text-lg font-bold font-display mb-4",children:"Balance Projection"}),T.jsx(tn,{values:f.map(e=>e.runningBalance),width:300,height:120}),T.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:"End of Period"}),T.jsx("p",{className:x("text-lg font-mono font-bold",(null==(e=f[f.length-1])?void 0:e.runningBalance)>=0?"text-neon-cyan":"text-red-400"),children:Lt((null==(t=f[f.length-1])?void 0:t.runningBalance)||0)})]}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:"Avg Monthly Net"}),T.jsx("p",{className:"text-lg font-mono font-bold text-neon-cyan",children:Lt(f.reduce((e,t)=>e+t.netCashFlow,0)/(f.length||1))})]})]})]})]})]})}const jn=[{id:"y2k",name:"Y2K Cyberpunk",desc:"Bold neon aesthetic",preview:"from-neon-pink to-neon-cyan"},{id:"neutral",name:"Neutral",desc:"Clean professional",preview:"from-blue-500 to-blue-600"},{id:"high-contrast",name:"High Contrast",desc:"Maximum readability",preview:"from-yellow-400 to-white"},{id:"dark-minimal",name:"Dark Minimal",desc:"Sleek and modern",preview:"from-indigo-500 to-indigo-600"}];function Nn(){const{theme:e,setTheme:t}=ct(),{loadBills:s}=vt(),{loadIncomes:a}=wt(),[r,o]=n.useState(!1),[l,i]=n.useState(!1),c=n.useRef(null),{apiKey:d,enabled:m,setApiKey:u,setEnabled:h}=rn(),p=e=>{const t=null==e?"":String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t},g=e=>e.map(p).join(","),f=(e,t)=>{const n=new Blob([e],{type:"text/csv"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=t,a.click(),URL.revokeObjectURL(s)},y=e=>{const t=[];let n="",s=!1;for(let a=0;a<e.length;a++){const r=e[a];s?'"'===r?'"'===e[a+1]?(n+='"',a++):s=!1:n+=r:'"'===r?s=!0:","===r?(t.push(n),n=""):n+=r}return t.push(n),t};return T.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[T.jsx("h1",{className:"text-3xl font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent",children:"Settings"}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(pe,{size:20,className:"text-neon-purple"}),T.jsx("h2",{className:"text-lg font-bold",children:"Theme"})]}),T.jsx("div",{className:"grid grid-cols-2 gap-3",children:jn.map(n=>T.jsxs("button",{onClick:()=>t(n.id),className:x("p-3 rounded-lg border-2 text-left transition-all",e===n.id?"border-neon-pink bg-neon-pink/10":"border-[var(--color-border)] hover:border-[var(--color-text-muted)]"),children:[T.jsx("div",{className:`h-2 w-12 rounded-full bg-gradient-to-r ${n.preview} mb-2`}),T.jsx("p",{className:"text-sm font-semibold",children:n.name}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:n.desc})]},n.id))})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(J,{size:20,className:"text-neon-purple"}),T.jsx("h2",{className:"text-lg font-bold",children:"FinVis AI"}),T.jsx("span",{className:"text-[10px] bg-neon-purple/20 text-neon-purple px-1.5 py-0.5 rounded-full",children:"Optional"})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-sm font-medium",children:"Enable AI Insights"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:"Chat with Claude about your finances"})]}),T.jsx("button",{onClick:()=>h(!m),className:x("relative w-11 h-6 rounded-full transition-colors",m?"bg-neon-purple":"bg-white/10"),children:T.jsx("div",{className:x("absolute top-0.5 w-5 h-5 rounded-full bg-white transition-transform",m?"translate-x-[22px]":"translate-x-0.5")})})]}),m&&T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"border-t border-[var(--color-border)]"}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium mb-1.5",children:"Claude API Key"}),T.jsx("div",{className:"flex gap-2",children:T.jsxs("div",{className:"relative flex-1",children:[T.jsx("input",{type:l?"text":"password",value:d,onChange:e=>u(e.target.value),placeholder:"sk-ant-...",className:"w-full bg-[var(--color-bg-primary)] border border-[var(--color-border)] rounded-lg px-3 py-2 text-sm font-mono focus:outline-none focus:border-neon-purple pr-10"}),T.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-2 top-1/2 -translate-y-1/2 text-[var(--color-text-muted)] hover:text-[var(--color-text-primary)]",children:l?T.jsx(de,{size:16}):T.jsx(xe,{size:16})})]})}),T.jsxs("p",{className:"text-xs text-[var(--color-text-muted)] mt-1.5",children:["Get your key from"," ",T.jsx("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noopener noreferrer",className:"text-neon-purple hover:underline",children:"console.anthropic.com"})]})]}),T.jsx("div",{className:"border-t border-[var(--color-border)]"}),T.jsxs("div",{className:"rounded-lg bg-neon-purple/5 border border-neon-purple/20 p-3",children:[T.jsx("p",{className:"text-xs font-semibold text-neon-purple mb-1",children:"Privacy Notice"}),T.jsxs("ul",{className:"text-xs text-[var(--color-text-secondary)] space-y-1 list-disc list-inside",children:[T.jsx("li",{children:"Your API key is stored locally in your browser only"}),T.jsx("li",{children:"Only aggregated summaries (totals, ratios, categories) are sent — never raw transaction details"}),T.jsx("li",{children:"Conversations are not stored on any server"}),T.jsx("li",{children:"You can disable AI at any time and all chat history is cleared"})]})]})]})]})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(le,{size:20,className:"text-neon-cyan"}),T.jsx("h2",{className:"text-lg font-bold",children:"Data Management"})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-sm font-medium",children:"Export Data"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:"Download bills and incomes as CSV files"})]}),T.jsxs(xn,{size:"sm",variant:"secondary",onClick:async()=>{const e=(new Date).toISOString().split("T")[0],t=await bt.getAll(),n=await Nt.getAll();if(t.length>0){const n=[g(["id","name","amount","frequency","category","dueDay","type","contractEndDate","paymentsRemaining","isPaid","notes","createdAt","updatedAt"]),...t.map(e=>g([e.id,e.name,e.amount,e.frequency,e.category,e.dueDay,e.type,e.contractEndDate??"",e.paymentsRemaining??"",e.isPaid,e.notes??"",e.createdAt,e.updatedAt]))];f(n.join("\n"),`finvis-bills-${e}.csv`)}if(n.length>0){const t=[g(["id","name","amount","payPeriod","createdAt","updatedAt"]),...n.map(e=>g([e.id,e.name,e.amount,e.payPeriod,e.createdAt,e.updatedAt]))];f(t.join("\n"),`finvis-incomes-${e}.csv`)}},children:[T.jsx(ce,{size:16}),"Export"]})]}),T.jsx("div",{className:"border-t border-[var(--color-border)]"}),T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-sm font-medium",children:"Import Data"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:"Import a bills or incomes CSV file"})]}),T.jsxs("div",{children:[T.jsx("input",{ref:c,type:"file",accept:".csv",onChange:async e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(n){try{const e=(e=>{const t=e.trim().split("\n");if(t.length<2)return[];const n=y(t[0]);return t.slice(1).map(e=>{const t=y(e);return Object.fromEntries(n.map((e,n)=>[e,t[n]??""]))})})(await n.text());if(0===e.length)throw new Error("Empty file");const t=Object.keys(e[0]);if(t.includes("payPeriod")){for(const t of e)await Nt.save({id:t.id,name:t.name,amount:parseFloat(t.amount),payPeriod:t.payPeriod,createdAt:t.createdAt,updatedAt:t.updatedAt});await a()}else{if(!t.includes("frequency"))throw new Error("Unrecognized CSV format");for(const t of e)await bt.save({id:t.id,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,dueDay:parseInt(t.dueDay,10),type:t.type,contractEndDate:t.contractEndDate||void 0,paymentsRemaining:t.paymentsRemaining?parseInt(t.paymentsRemaining,10):void 0,isPaid:"true"===t.isPaid,notes:t.notes||void 0,createdAt:t.createdAt,updatedAt:t.updatedAt});await s()}}catch{alert("Invalid CSV file. Import a bills or incomes CSV exported from FinVis.")}c.current&&(c.current.value="")}},className:"hidden"}),T.jsxs(xn,{size:"sm",variant:"secondary",onClick:()=>{var e;return null==(e=c.current)?void 0:e.click()},children:[T.jsx(Ae,{size:16}),"Import"]})]})]}),T.jsx("div",{className:"border-t border-[var(--color-border)]"}),T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{children:[T.jsx("p",{className:"text-sm font-medium text-red-400",children:"Clear All Data"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)]",children:"Permanently delete everything"})]}),r?T.jsxs("div",{className:"flex gap-2",children:[T.jsx(xn,{size:"sm",variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),T.jsx(xn,{size:"sm",variant:"danger",onClick:async()=>{await bt.deleteAll(),await Nt.deleteAll(),await s(),await a(),o(!1)},children:"Confirm"})]}):T.jsxs(xn,{size:"sm",variant:"danger",onClick:()=>o(!0),children:[T.jsx(Se,{size:16}),"Clear"]})]})]})]}),T.jsxs(Vt,{children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx(we,{size:20,className:"text-neon-green"}),T.jsx("h2",{className:"text-lg font-bold",children:"Privacy"})]}),T.jsxs("div",{className:"space-y-2 text-sm text-[var(--color-text-secondary)]",children:[T.jsx("p",{children:"FinVis is 100% privacy-first:"}),T.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[T.jsx("li",{children:"All data stored locally on your device (IndexedDB)"}),T.jsx("li",{children:"No data is ever sent to any server (unless AI is enabled)"}),T.jsx("li",{children:"No analytics or tracking of any kind"}),T.jsx("li",{children:"Works completely offline"}),T.jsx("li",{children:"Open source and auditable"}),m&&T.jsx("li",{className:"text-neon-purple",children:"AI mode: only aggregated summaries are sent to the Claude API"})]})]})]}),T.jsx(Vt,{children:T.jsx("p",{className:"text-xs text-center text-[var(--color-text-muted)]",children:"FinVis v2.0.0 · Privacy-First Finance Visualizer · MIT License"})})]})}function wn(e){const t=[];let n="",s=!1;for(let a=0;a<e.length;a++){const r=e[a];s?'"'===r?'"'===e[a+1]?(n+='"',a++):s=!1:n+=r:'"'===r?s=!0:","===r?(t.push(n),n=""):n+=r}return t.push(n),t}function kn(){const[e,t]=n.useState(!1),[s,a]=n.useState(!1),{loadBills:r}=vt();n.useEffect(()=>{bt.count().then(e=>{0===e&&t(!0)})},[]);return e?T.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[T.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),T.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-[var(--color-bg-primary)] border border-[var(--color-border)] shadow-2xl overflow-hidden",children:[T.jsx("div",{className:"h-1 w-full bg-gradient-to-r from-neon-pink via-neon-purple to-neon-cyan"}),T.jsxs("div",{className:"p-8 text-center",children:[T.jsx("h1",{className:"text-3xl font-bold font-display bg-gradient-to-r from-neon-pink to-neon-cyan bg-clip-text text-transparent mb-2",children:"Welcome to FinVis"}),T.jsx("p",{className:"text-sm text-[var(--color-text-muted)] mb-8",children:"Your privacy-first finance visualizer. How would you like to get started?"}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("button",{onClick:async()=>{a(!0);try{const e=await fetch("/n/projects/finvis/sample_bills.csv"),n=function(e){const t=e.trim().split("\n");if(t.length<2)return[];const n=wn(t[0]);return t.slice(1).filter(e=>e.trim()).map(e=>{const t=wn(e);return Object.fromEntries(n.map((e,n)=>[e,t[n]??""]))})}(await e.text()),s=(new Date).toISOString();for(const t of n)await bt.save({id:t.id,name:t.name,amount:parseFloat(t.amount),frequency:t.frequency,category:t.category,dueDay:parseInt(t.dueDay,10)||1,type:t.type,isPaid:"true"===t.isPaid,notes:t.notes||void 0,contractEndDate:t.contractEndDate||void 0,paymentsRemaining:t.paymentsRemaining?parseInt(t.paymentsRemaining,10):void 0,createdAt:t.createdAt||s,updatedAt:t.updatedAt||s});await r(),t(!1)}catch{a(!1)}},disabled:s,className:"group flex flex-col items-center gap-3 p-5 rounded-xl border-2 border-neon-purple/40 hover:border-neon-purple bg-neon-purple/5 hover:bg-neon-purple/10 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[T.jsx(ke,{size:28,className:"text-neon-purple group-hover:scale-110 transition-transform"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-semibold text-sm",children:"Load Sample Data"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mt-1 leading-relaxed",children:"Explore with 40 realistic bills across all categories"})]})]}),T.jsxs("button",{onClick:()=>t(!1),disabled:s,className:"group flex flex-col items-center gap-3 p-5 rounded-xl border-2 border-[var(--color-border)] hover:border-neon-cyan bg-transparent hover:bg-neon-cyan/5 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[T.jsx(ge,{size:28,className:"text-neon-cyan group-hover:scale-110 transition-transform"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-semibold text-sm",children:"Start Fresh"}),T.jsx("p",{className:"text-xs text-[var(--color-text-muted)] mt-1 leading-relaxed",children:"Add your own bills and income from scratch"})]})]})]}),s&&T.jsx("p",{className:"text-xs text-neon-purple mt-5 animate-pulse",children:"Loading sample data..."})]})]})]}):null}function Sn(){const e=ct(e=>e.theme);return n.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),T.jsxs(i,{children:[T.jsx(kn,{}),T.jsx(c,{children:T.jsxs(d,{element:T.jsx(ut,{}),children:[T.jsx(d,{path:"/",element:T.jsx(cn,{})}),T.jsx(d,{path:"/bills",element:T.jsx(fn,{})}),T.jsx(d,{path:"/income",element:T.jsx(yn,{})}),T.jsx(d,{path:"/forecast",element:T.jsx(vn,{})}),T.jsx(d,{path:"/settings",element:T.jsx(Nn,{})})]})})]})}H.createRoot(document.getElementById("root")).render(T.jsx(r.StrictMode,{children:T.jsx(Sn,{})}));
